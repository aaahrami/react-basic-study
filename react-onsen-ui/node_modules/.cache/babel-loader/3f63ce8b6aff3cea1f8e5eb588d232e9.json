{"ast":null,"code":"/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\nimport platform from './platform.js';\nimport util from './util.js';\n\nconst error = message => util.throw(`In PageAttributeExpression: ${message}`);\n\nconst pageAttributeExpression = {\n  _variables: {},\n\n  /**\n   * Define a variable.\n   *\n   * @param {String} name Name of the variable\n   * @param {String|Function} value Value of the variable. Can be a string or a function. The function must return a string.\n   * @param {Boolean} overwrite If this value is false, an error will be thrown when trying to define a variable that has already been defined.\n   */\n  defineVariable: function (name, value) {\n    let overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (typeof name !== 'string') {\n      error('Variable name must be a string');\n    } else if (typeof value !== 'string' && typeof value !== 'function') {\n      error('Variable value must be a string or a function');\n    } else if (Object.prototype.hasOwnProperty.call(this._variables, name) && !overwrite) {\n      error(`\"${name}\" is already defined`);\n    }\n\n    this._variables[name] = value;\n  },\n\n  /**\n   * Get a variable.\n   *\n   * @param {String} name Name of the variable.\n   * @return {String|Function|null}\n   */\n  getVariable: function (name) {\n    if (!Object.prototype.hasOwnProperty.call(this._variables, name)) {\n      return null;\n    }\n\n    return this._variables[name];\n  },\n\n  /**\n   * Remove a variable.\n   *\n   * @param {String} name Name of the varaible.\n   */\n  removeVariable: function (name) {\n    delete this._variables[name];\n  },\n\n  /**\n   * Get all variables.\n   *\n   * @return {Object}\n   */\n  getAllVariables: function () {\n    return this._variables;\n  },\n  _parsePart: function (part) {\n    let c,\n        inInterpolation = false,\n        currentIndex = 0;\n    const tokens = [];\n\n    if (part.length === 0) {\n      error('Unable to parse empty string');\n    }\n\n    for (let i = 0; i < part.length; i++) {\n      c = part.charAt(i);\n\n      if (c === '$' && part.charAt(i + 1) === '{') {\n        if (inInterpolation) {\n          error('Nested interpolation not supported');\n        }\n\n        const token = part.substring(currentIndex, i);\n\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i));\n        }\n\n        currentIndex = i;\n        inInterpolation = true;\n      } else if (c === '}') {\n        if (!inInterpolation) {\n          error('} must be preceeded by ${');\n        }\n\n        const token = part.substring(currentIndex, i + 1);\n\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i + 1));\n        }\n\n        currentIndex = i + 1;\n        inInterpolation = false;\n      }\n    }\n\n    if (inInterpolation) {\n      error('Unterminated interpolation');\n    }\n\n    tokens.push(part.substring(currentIndex, part.length));\n    return tokens;\n  },\n  _replaceToken: function (token) {\n    const re = /^\\${(.*?)}$/,\n          match = token.match(re);\n\n    if (match) {\n      const name = match[1].trim();\n      const variable = this.getVariable(name);\n\n      if (variable === null) {\n        error(`Variable \"${name}\" does not exist`);\n      } else if (typeof variable === 'string') {\n        return variable;\n      } else {\n        const rv = variable();\n\n        if (typeof rv !== 'string') {\n          error('Must return a string');\n        }\n\n        return rv;\n      }\n    } else {\n      return token;\n    }\n  },\n  _replaceTokens: function (tokens) {\n    return tokens.map(this._replaceToken.bind(this));\n  },\n  _parseExpression: function (expression) {\n    return expression.split(',').map(function (part) {\n      return part.trim();\n    }).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(part => part.join(''));\n  },\n\n  /**\n   * Evaluate an expression.\n   *\n   * @param {String} expression An page attribute expression.\n   * @return {Array}\n   */\n  evaluate: function (expression) {\n    if (!expression) {\n      return [];\n    }\n\n    return this._parseExpression(expression);\n  }\n}; // Define default variables.\n\npageAttributeExpression.defineVariable('mobileOS', platform.getMobileOS());\npageAttributeExpression.defineVariable('iOSDevice', platform.getIOSDevice());\npageAttributeExpression.defineVariable('runtime', () => {\n  return platform.isWebView() ? 'cordova' : 'browser';\n});\nexport default pageAttributeExpression;","map":{"version":3,"names":["platform","util","error","message","throw","pageAttributeExpression","_variables","defineVariable","name","value","overwrite","Object","prototype","hasOwnProperty","call","getVariable","removeVariable","getAllVariables","_parsePart","part","c","inInterpolation","currentIndex","tokens","length","i","charAt","token","substring","push","_replaceToken","re","match","trim","variable","rv","_replaceTokens","map","bind","_parseExpression","expression","split","join","evaluate","getMobileOS","getIOSDevice","isWebView"],"sources":["C:/React-app/test/ui/node_modules/onsenui/esm/ons/page-attribute-expression.js"],"sourcesContent":["/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport platform from './platform.js';\nimport util from './util.js';\n\nconst error = message => util.throw(`In PageAttributeExpression: ${message}`);\n\nconst pageAttributeExpression = {\n  _variables: {},\n\n  /**\n   * Define a variable.\n   *\n   * @param {String} name Name of the variable\n   * @param {String|Function} value Value of the variable. Can be a string or a function. The function must return a string.\n   * @param {Boolean} overwrite If this value is false, an error will be thrown when trying to define a variable that has already been defined.\n   */\n  defineVariable: function(name, value, overwrite=false) {\n    if (typeof name !== 'string') {\n      error('Variable name must be a string');\n    }\n    else if (typeof value !== 'string' && typeof value !== 'function') {\n      error('Variable value must be a string or a function');\n    }\n    else if (Object.prototype.hasOwnProperty.call(this._variables, name) && !overwrite) {\n      error(`\"${name}\" is already defined`);\n    }\n    this._variables[name] = value;\n  },\n\n  /**\n   * Get a variable.\n   *\n   * @param {String} name Name of the variable.\n   * @return {String|Function|null}\n   */\n  getVariable: function(name) {\n    if (!Object.prototype.hasOwnProperty.call(this._variables, name)) {\n      return null;\n    }\n\n    return this._variables[name];\n  },\n\n  /**\n   * Remove a variable.\n   *\n   * @param {String} name Name of the varaible.\n   */\n  removeVariable: function(name) {\n    delete this._variables[name];\n  },\n\n  /**\n   * Get all variables.\n   *\n   * @return {Object}\n   */\n  getAllVariables: function() {\n    return this._variables;\n  },\n  _parsePart: function(part) {\n    let c,\n      inInterpolation = false,\n      currentIndex = 0;\n\n    const tokens = [];\n\n    if (part.length === 0) {\n      error('Unable to parse empty string');\n    }\n\n    for (let i = 0; i < part.length; i++) {\n      c = part.charAt(i);\n\n      if (c === '$' && part.charAt(i + 1) === '{') {\n        if (inInterpolation) {\n          error('Nested interpolation not supported');\n        }\n\n        const token = part.substring(currentIndex, i);\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i));\n        }\n\n        currentIndex = i;\n        inInterpolation = true;\n      }\n      else if (c === '}') {\n        if (!inInterpolation) {\n          error('} must be preceeded by ${');\n        }\n\n        const token = part.substring(currentIndex, i + 1);\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i + 1));\n        }\n\n        currentIndex = i + 1;\n        inInterpolation = false;\n      }\n    }\n\n    if (inInterpolation) {\n      error('Unterminated interpolation');\n    }\n\n    tokens.push(part.substring(currentIndex, part.length));\n\n    return tokens;\n  },\n  _replaceToken: function(token) {\n    const re = /^\\${(.*?)}$/,\n      match = token.match(re);\n\n    if (match) {\n      const name = match[1].trim();\n      const variable = this.getVariable(name);\n\n      if (variable === null) {\n        error(`Variable \"${name}\" does not exist`);\n      }\n      else if (typeof variable === 'string') {\n        return variable;\n      }\n      else {\n        const rv = variable();\n\n        if (typeof rv !== 'string') {\n          error('Must return a string');\n        }\n\n        return rv;\n      }\n    }\n    else {\n      return token;\n    }\n  },\n  _replaceTokens: function(tokens) {\n    return tokens.map(this._replaceToken.bind(this));\n  },\n  _parseExpression: function(expression) {\n    return expression.split(',')\n      .map(\n        function(part) {\n          return part.trim();\n        }\n      )\n      .map(this._parsePart.bind(this))\n      .map(this._replaceTokens.bind(this))\n      .map((part) => part.join(''));\n  },\n\n  /**\n   * Evaluate an expression.\n   *\n   * @param {String} expression An page attribute expression.\n   * @return {Array}\n   */\n  evaluate: function(expression) {\n    if (!expression) {\n      return [];\n    }\n\n    return this._parseExpression(expression);\n  }\n};\n\n// Define default variables.\npageAttributeExpression.defineVariable('mobileOS', platform.getMobileOS());\npageAttributeExpression.defineVariable('iOSDevice', platform.getIOSDevice());\npageAttributeExpression.defineVariable('runtime', () => {\n  return platform.isWebView() ? 'cordova' : 'browser';\n});\n\nexport default pageAttributeExpression;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}